<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
    "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>
Balls 3D
</title>
<script type="text/javascript" src="o3djs/base.js"></script>
<script type="text/javascript" src="balls3d/b3d.js"></script>
<script type="text/javascript" src="balls3d/b3do.js"></script>
<script type="text/javascript" id="o3dscript">
o3djs.require('o3djs.util');
o3djs.require('o3djs.math')
o3djs.require('o3djs.rendergraph')
o3djs.require('o3djs.primitives')
o3djs.require('o3djs.material')

function debug(s, l){
	if (l === undefined) {
		document.getElementById("dbg").innerHTML += s + "<br>"
	}
	else {
		document.getElementById("dbg" + l).innerHTML = s + "<br>"	
	}
}

function debugh(s) {
	g_debug_http.open("POST", s, true)
	g_debug_http.send(null)		
}

// like it says
function keyPressedCallback(event) {
    event = event || window.event
    var keyChar = String.fromCharCode(o3djs.event.getEventKeyChar(event))
//    alert("  g_eyePosition: " + g_eyePosition)
//    alert("  g_viewInfo: " + g_viewInfo)
    var mat=g_viewInfo.drawContext.view
    switch(keyChar) {
    case '%':					//	left
    	turnCamera(0.05)
        break
    case "'":					// right
    	turnCamera(-0.05)
        break
    case '&':					// up (forward)
    case 'w':
    	moveCamera(0.4)
        break
    case '(':					// down (backward)
    case 's':
    	moveCamera(-0.5)
        break
    case 'a':					// up (forward)
    	slideCamera(0.5)
        break
    case 'd':					// down (backward)
    	slideCamera(-0.5)
        break
    case '!':					// page up
    	g_eyePosition[1] += 0.5
        break
    case '"':					// page down
    	g_eyePosition[1] -= 0.5
        break
    case '.':					// page down
    	if (g_world.is_running())
			g_world.pause()
		else
			g_world.start()
        break
    }
    setCamera()
//    debugh("key pressed-->" + keyChar + "<--")
	debug("key pressed-->" + keyChar + "<-- code: " + o3djs.event.getEventKeyChar(event) + " shift: "+event.shiftKey,1)
}

function main(){
	/// o3d requires us to run main code in a callback, so:
	b3do.run(main2)
}

function main2(){
	g_world = new b3do.world(-10.0, 0.05, 0)
	g_world.addDBall(.5, [0, 2, 0], [0, 0, 0, 1])
//	g_world.addDBall(.5, [1, 3, 0], [0, 0, 0, 1])
	debug("g_world: " + g_world + " gravity: " + g_world.world.gravity, 1)
	debug("dynamics[0].pos: " + g_world.world.dynamics[0], 3)
}

</script>
</head>
<body onload="main()">
<h3>Balls 3D Physics Engine</h3>

Use arrow keys to navigate; pg up/dn; period
<br/>
<!-- Start of O3D plugin -->
<div id="o3d" style="width: 600px; height: 480px;"></div>
<div id="dbg0"></div>
<div id="dbg1"></div>
<div id="dbg2"></div>
<div id="dbg3"></div>
<div id="dbg4"></div>
<div id="dbg5"></div>
<div id="dbg6"></div>
<div id="dbg"></div>
<!-- End of O3D plugin -->
</body>
</html>

